<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cv Forge | Global Design Edition</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700;900&family=Almarai:wght@700;800&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <style>
        :root { 
            --primary: #1a237e; --accent: #00bcd4;
            --bg-grad: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
            --card-bg: #ffffff;
            --text-main: #2d3436; --text-muted: #636e72;
            --input-border: #dfe6e9;
        }

        body.dark-mode {
            --bg-grad: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            --card-bg: #1e293b;
            --text-main: #f1f5f9; --text-muted: #94a3b8;
            --input-border: #334155;
        }
        
        * { box-sizing: border-box; transition: 0.3s ease; }
        body { margin: 0; padding: 0; background: var(--bg-grad); font-family: 'Cairo', sans-serif; color: var(--text-main); }

        /* --- UI Header --- */
        header { 
            width: 100%; padding: 15px 25px; background: var(--card-bg);
            box-shadow: 0 4px 20px rgba(0,0,0,0.08); position: sticky; top: 0; z-index: 1000;
            display: flex; justify-content: space-between; align-items: center;
        }
        .logo-text { font-weight: 900; font-size: 22px; color: var(--primary); font-family: 'Poppins', sans-serif; }
        .lang-selector button { padding: 6px 12px; border: 1px solid var(--input-border); background: transparent; cursor: pointer; border-radius: 8px; font-weight: bold; color: var(--text-main); }
        .lang-selector button.active { background: var(--primary); color: white; border-color: var(--primary); }

        /* --- Form Container --- */
        .app-container { max-width: 900px; margin: 40px auto; padding: 0 20px; }
        .main-card { background: var(--card-bg); border-radius: 30px; padding: 40px; box-shadow: 0 25px 50px rgba(0,0,0,0.1); border: 1px solid var(--input-border); }
        .section-title { font-size: 14px; font-weight: 900; color: var(--accent); margin: 30px 0 15px; text-transform: uppercase; letter-spacing: 1px; display: flex; align-items: center; gap: 10px; }
        .section-title::after { content: ""; flex: 1; height: 2px; background: var(--input-border); border-radius: 2px; }

        .grid-row { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        @media (max-width: 650px) { .grid-row { grid-template-columns: 1fr; } }

        label { display: block; font-weight: 700; font-size: 12px; color: var(--text-muted); margin-bottom: 8px; }
        input, textarea { width: 100%; padding: 14px; border: 2px solid var(--input-border); border-radius: 15px; background: var(--card-bg); color: var(--text-main); font-size: 14px; outline: none; }
        input:focus { border-color: var(--accent); box-shadow: 0 0 0 4px rgba(0, 188, 212, 0.1); }

        .action-btn { width: 100%; padding: 20px; background: var(--primary); color: white; border: none; border-radius: 20px; font-size: 18px; font-weight: 800; cursor: pointer; margin-top: 30px; display: flex; align-items: center; justify-content: center; gap: 15px; box-shadow: 0 10px 30px rgba(26, 35, 126, 0.3); }

        /* --- GLOBAL PDF DESIGN (The Magic Area) --- */
        #pdf-render-zone { position: absolute; top: -20000px; left: -20000px; }
        .pdf-page { width: 210mm; height: 297mm; background: #ffffff; display: grid; grid-template-columns: 75mm 135mm; color: #333; overflow: hidden; position: relative; }
        
        /* Left Column (The Stylish Sidebar) */
        .pdf-sidebar { background: #2c3e50; color: #ffffff; padding: 40px 25px; display: flex; flex-direction: column; align-items: center; height: 100%; }
        .pdf-photo-frame { width: 140px; height: 140px; border-radius: 50%; border: 5px solid rgba(255,255,255,0.2); overflow: hidden; margin-bottom: 30px; background: #ecf0f1; }
        .pdf-photo-frame img { width: 100%; height: 100%; object-fit: cover; }
        
        .side-section { width: 100%; margin-bottom: 35px; }
        .side-title { font-size: 16px; font-weight: 900; border-bottom: 2px solid var(--accent); padding-bottom: 8px; margin-bottom: 15px; color: var(--accent); text-transform: uppercase; }
        .contact-item { display: flex; align-items: center; gap: 10px; font-size: 12px; margin-bottom: 12px; opacity: 0.9; line-height: 1.4; }
        .contact-item i { color: var(--accent); width: 15px; text-align: center; }

        /* Right Column (The Professional Content) */
        .pdf-content { padding: 50px 40px; background: #ffffff; position: relative; }
        .pdf-name-header { margin-bottom: 40px; }
        .pdf-name-header h1 { font-size: 38px; font-weight: 900; margin: 0; color: #2c3e50; line-height: 1.1; }
        .pdf-name-header p { font-size: 20px; color: var(--accent); font-weight: 700; margin: 10px 0 0; }
        
        .main-section { margin-bottom: 35px; }
        .main-title-wrap { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
        .main-title-wrap i { font-size: 20px; color: #2c3e50; }
        .main-title { font-size: 18px; font-weight: 900; color: #2c3e50; text-transform: uppercase; position: relative; }
        .main-title::after { content: ""; position: absolute; bottom: -5px; left: 0; width: 40px; height: 3px; background: var(--accent); }
        
        .text-area { font-size: 13.5px; line-height: 1.7; color: #555; white-space: pre-line; text-align: justify; }
        
        /* Decorative Background Elements */
        .pdf-decoration { position: absolute; top: 0; right: 0; width: 150px; height: 150px; background: var(--accent); opacity: 0.05; border-radius: 0 0 0 100%; z-index: 0; }

        /* LTR Fix for English/French/etc. */
        .ltr { direction: ltr !important; grid-template-columns: 135mm 75mm !important; }
        .ltr .pdf-sidebar { border-right: none; border-left: none; }
        .ltr .main-title::after { left: 0; right: auto; }
        
        #toast { position: fixed; bottom: 30px; left: 50%; transform: translateX(-50%); background: #2c3e50; color: white; padding: 12px 30px; border-radius: 50px; font-weight: bold; display: none; z-index: 2000; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
    </style>
</head>
<body id="body-tag">

    <header>
        <div class="logo-text">CV<span style="color:var(--accent)">FORGE</span> PRO</div>
        <div style="display:flex; gap:15px; align-items:center;">
            <div class="lang-selector">
                <button id="btn-ar" class="active" onclick="setLang('ar')">Ø¹Ø±Ø¨ÙŠ</button>
                <button id="btn-en" onclick="setLang('en')">EN</button>
            </div>
            <i class="fas fa-adjust" style="cursor:pointer; font-size:20px; color:var(--primary);" onclick="toggleTheme()"></i>
        </div>
    </header>

    <div class="app-container">
        <div class="main-card">
            <div id="form-welcome" style="text-align:center; margin-bottom:40px;">
                <h2 style="font-size:30px; font-weight:900; margin:0;">ØªØµÙ…ÙŠÙ…Ùƒ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ Ø¬Ø§Ù‡Ø² âœ¨</h2>
                <p style="color:var(--text-muted);">Ø§Ù…Ù„Ø£ Ø¨ÙŠØ§Ù†Ø§ØªÙƒ ÙˆØ´Ø§Ù‡Ø¯ Ø³Ø­Ø±Ø§Ù‹ ÙÙŠ Ø§Ù„Ù€ PDF Ø§Ù„Ù…Ø·ÙˆØ±.</p>
            </div>

            <div class="section-title">Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙˆØ§ØµÙ„ ÙˆØ§Ù„ØªØ¹Ø±ÙŠÙ</div>
            <div class="grid-row">
                <div class="field"><label>Ø§Ù„Ø§Ø³Ù… Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</label><input type="text" id="inName" oninput="save()"></div>
                <div class="field"><label>Ø§Ù„Ù…Ø³Ù…Ù‰ Ø§Ù„ÙˆØ¸ÙŠÙÙŠ</label><input type="text" id="inJob" oninput="save()"></div>
            </div>
            <div class="grid-row">
                <div class="field"><label>Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ</label><input type="text" id="inPhone" oninput="save()"></div>
                <div class="field"><label>Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ</label><input type="email" id="inEmail" oninput="save()"></div>
            </div>
            <div class="grid-row">
                <div class="field"><label>Ø§Ù„Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ø­Ø§Ù„ÙŠ</label><input type="text" id="inAddress" oninput="save()"></div>
                <div class="field"><label>ØªØ§Ø±ÙŠØ® Ø§Ù„Ù…ÙŠÙ„Ø§Ø¯</label><input type="text" id="inBirth" oninput="save()"></div>
            </div>

            <div class="section-title">Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆØ§Ù„Ù†Ø¨Ø°Ø©</div>
            <div class="field" style="margin-bottom:20px;"><label>Ø§Ø±ÙØ¹ ØµÙˆØ±ØªÙƒ Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</label><input type="file" id="inPhoto" accept="image/*"></div>
            <div class="field" style="margin-bottom:20px;"><label>Ø¹Ù†Ù‘ÙŠ (Ù†Ø¨Ø°Ø© ØªØ¹Ø±ÙŠÙÙŠØ©)</label><textarea id="inAbout" oninput="save()" rows="3"></textarea></div>

            <div class="section-title">Ø§Ù„Ù…Ø¤Ù‡Ù„Ø§Øª ÙˆØ§Ù„Ø®Ø¨Ø±Ø§Øª</div>
            <div class="field" style="margin-bottom:20px;"><label>Ø§Ù„Ø®Ø¨Ø±Ø§Øª Ø§Ù„Ø¹Ù…Ù„ÙŠØ© (Ø±ØªØ¨Ù‡Ø§ Ù…Ù† Ø§Ù„Ø£Ø­Ø¯Ø« Ù„Ù„Ø£Ù‚Ø¯Ù…)</label><textarea id="inExp" oninput="save()" rows="5"></textarea></div>
            <div class="field" style="margin-bottom:20px;"><label>Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„ØªØ¹Ù„ÙŠÙ…ÙŠ</label><textarea id="inEdu" oninput="save()" rows="3"></textarea></div>

            <div class="grid-row">
                <div class="field"><label>Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ© ÙˆØ§Ù„Ø´Ø®ØµÙŠØ©</label><textarea id="inSkills" oninput="save()" rows="3"></textarea></div>
                <div class="field"><label>Ø§Ù„Ù„ØºØ§Øª Ø§Ù„Ù…ØªÙ‚Ù†Ø©</label><textarea id="inLang" oninput="save()" rows="3"></textarea></div>
            </div>

            <button class="action-btn" onclick="generatePDF()">
                <i class="fas fa-magic"></i> Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ© Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ© (PDF)
            </button>
        </div>
    </div>

    <div id="toast">Ø¬Ø§Ø±ÙŠ ØªØµÙ…ÙŠÙ… Ù…Ù„ÙÙƒ Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ... ğŸ¨</div>

    <div id="pdf-render-zone">
        <div id="pdf-template" class="pdf-page">
            <div class="pdf-sidebar">
                <div class="pdf-photo-frame"><img id="outPhoto"></div>
                
                <div class="side-section">
                    <div class="side-title" id="side-contact-title">Ø§ØªØµØ§Ù„</div>
                    <div class="contact-item"><i class="fas fa-phone"></i> <span id="outPhone"></span></div>
                    <div class="contact-item"><i class="fas fa-envelope"></i> <span id="outEmail"></span></div>
                    <div class="contact-item"><i class="fas fa-map-marker-alt"></i> <span id="outAddress"></span></div>
                    <div class="contact-item"><i class="fas fa-calendar-alt"></i> <span id="outBirth"></span></div>
                </div>

                <div class="side-section">
                    <div class="side-title" id="side-skills-title">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª</div>
                    <div id="outSkills" style="font-size:12px; line-height:1.8; opacity:0.9;"></div>
                </div>

                <div class="side-section">
                    <div class="side-title" id="side-lang-title">Ø§Ù„Ù„ØºØ§Øª</div>
                    <div id="outLang" style="font-size:12px; line-height:1.8; opacity:0.9;"></div>
                </div>
            </div>

            <div class="pdf-content">
                <div class="pdf-decoration"></div>
                <div class="pdf-name-header">
                    <h1 id="outName"></h1>
                    <p id="outJob"></p>
                </div>

                <div class="main-section">
                    <div class="main-title-wrap"><i class="fas fa-user-tie"></i> <div class="main-title" id="main-about-title">Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ</div></div>
                    <div id="outAbout" class="text-area"></div>
                </div>

                <div class="main-section">
                    <div class="main-title-wrap"><i class="fas fa-briefcase"></i> <div class="main-title" id="main-exp-title">Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ù…Ù‡Ù†ÙŠØ©</div></div>
                    <div id="outExp" class="text-area"></div>
                </div>

                <div class="main-section">
                    <div class="main-title-wrap"><i class="fas fa-graduation-cap"></i> <div class="main-title" id="main-edu-title">Ø§Ù„ØªØ¹Ù„ÙŠÙ…</div></div>
                    <div id="outEdu" class="text-area"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const fields = ['inName', 'inJob', 'inBirth', 'inAddress', 'inPhone', 'inEmail', 'inAbout', 'inExp', 'inEdu', 'inSkills', 'inLang'];
        let currentLang = 'ar';

        function setLang(lang) {
            currentLang = lang;
            document.querySelectorAll('.lang-selector button').forEach(b => b.classList.remove('active'));
            document.getElementById('btn-' + lang).classList.add('active');
            
            const isAr = lang === 'ar';
            document.getElementById('pdf-template').className = isAr ? 'pdf-page' : 'pdf-page ltr';
            document.documentElement.dir = isAr ? 'rtl' : 'ltr';

            // ØªØ±Ø¬Ù…Ø© Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ù€ PDF
            document.getElementById('side-contact-title').innerText = isAr ? 'Ø§ØªØµØ§Ù„' : 'Contact';
            document.getElementById('side-skills-title').innerText = isAr ? 'Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª' : 'Skills';
            document.getElementById('side-lang-title').innerText = isAr ? 'Ø§Ù„Ù„ØºØ§Øª' : 'Languages';
            document.getElementById('main-about-title').innerText = isAr ? 'Ø§Ù„Ù…Ù„Ù Ø§Ù„Ø´Ø®ØµÙŠ' : 'Profile';
            document.getElementById('main-exp-title').innerText = isAr ? 'Ø§Ù„Ø®Ø¨Ø±Ø© Ø§Ù„Ù…Ù‡Ù†ÙŠØ©' : 'Work Experience';
            document.getElementById('main-edu-title').innerText = isAr ? 'Ø§Ù„ØªØ¹Ù„ÙŠÙ…' : 'Education';
        }

        function save() { fields.forEach(f => localStorage.setItem(f, document.getElementById(f).value)); }
        function load() { fields.forEach(f => { if(localStorage.getItem(f)) document.getElementById(f).value = localStorage.getItem(f); }); }
        
        function toggleTheme() { document.body.classList.toggle('dark-mode'); }

        document.getElementById('inPhoto').onchange = e => {
            const r = new FileReader(); r.onload = () => document.getElementById('outPhoto').src = r.result; r.readAsDataURL(e.target.files[0]);
        };

        async function generatePDF() {
            const toast = document.getElementById('toast');
            toast.style.display = 'block';

            fields.forEach(f => {
                const outId = f.replace('in', 'out');
                if(document.getElementById(outId)) document.getElementById(outId).innerText = document.getElementById(f).value;
            });

            setTimeout(async () => {
                const canvas = await html2canvas(document.getElementById('pdf-template'), { scale: 3, useCORS: true });
                const pdf = new jspdf.jsPDF('p', 'mm', 'a4');
                pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 0, 210, 297);
                pdf.save(`Global_CV_${currentLang}.pdf`);
                toast.style.display = 'none';
            }, 1500);
        }

        window.onload = load;
    </script>
</body>
</html>
