                <div class="input-group"><label>ุฑูู ุงููุงุชู</label><input type="text" id="inPhone" oninput="save()"></div>
                <div class="input-group"><label>ุงูุฅูููู</label><input type="email" id="inEmail" oninput="save()"></div>
            </div>

            <div class="section-label">ุงููุณูุฑุฉ ูุงูุฎุจุฑุงุช</div>
            <div class="input-group"><label>ุงูุตูุฑุฉ ุงูุดุฎุตูุฉ</label><input type="file" id="inPhoto" accept="image/*"></div>
            <div class="input-group"><label>ุงููุจุฐุฉ ุงูุชุนุฑูููุฉ</label><textarea id="inAbout" oninput="save()" rows="2"></textarea></div>
            <div class="input-group"><label>ุงูุฎุจุฑุงุช ุงูุนูููุฉ</label><textarea id="inExp" oninput="save()" rows="4"></textarea></div>
            <div class="input-group"><label>ุงูุชุนููู</label><textarea id="inEdu" oninput="save()" rows="2"></textarea></div>

            <div class="input-grid">
                <div class="input-group"><label>ุงูููุงุฑุงุช</label><input type="text" id="inSkills" oninput="save()"></div>
                <div class="input-group"><label>ุงููุบุงุช</label><input type="text" id="inLang" oninput="save()"></div>
            </div>

            <button class="btn-download" onclick="exportCV()">
                <i class="fas fa-file-pdf"></i> (ุชุญููู ุงูุณูุฑุฉ ุงูุฐุงุชูุฉ pdf)
            </button>
        </div>
    </div>

    <div id="status-overlay">
        <div class="loader-box">
            <i class="fas fa-cog fa-spin" style="font-size:30px; color:var(--accent); margin-bottom:15px;"></i>
            <div id="status-text">ุฌุงุฑู ุงููุนุงูุฌุฉ...</div>
        </div>
    </div>

    <div id="pdf-render-zone">
        <div id="pdf-template" class="pdf-page">
            <div id="pdf-header" class="pdf-header">
                <div><h1 id="outName" style="font-size:42px; margin:0;"></h1><p id="outJob" style="font-size:22px; opacity:0.9; margin:5px 0 0;"></p></div>
                <div style="width:140px; height:140px; border-radius:15px; border:4px solid white; overflow:hidden; background:#eee;"><img id="outPhoto" style="width:100%; height:100%; object-fit:cover;"></div>
            </div>
            <div class="pdf-body">
                <div class="pdf-main">
                    <section><div id="pdf-label-exp" class="pdf-section-title">ุงูุฎุจุฑุงุช ุงูููููุฉ</div><div class="pdf-divider"></div><div id="outExp" class="content-text"></div></section>
                    <section><div id="pdf-label-edu" class="pdf-section-title">ุงูุชุนููู</div><div class="pdf-divider"></div><div id="outEdu" class="content-text"></div></section>
                    <section><div id="pdf-label-skills" class="pdf-section-title">ุงูููุงุฑุงุช ูุงููุฏุฑุงุช</div><div class="pdf-divider"></div><div id="outSkills" class="content-text"></div></section>
                </div>
                <div class="pdf-side">
                    <div><div id="pdf-label-about" class="pdf-badge">ุงูููู ุงูุดุฎุตู</div><div id="outAbout" style="font-size:12px; line-height:1.6; margin-bottom:30px;"></div></div>
                    <div><div id="pdf-label-contact" class="pdf-badge">ุจูุงูุงุช ุงูุชูุงุตู</div><div style="font-size:11px; margin-bottom:10px;">๐ <span id="outBirth"></span></div><div style="font-size:11px; margin-bottom:10px;">๐ <span id="outAddress"></span></div><div style="font-size:11px; margin-bottom:10px;">๐ <span id="outPhone"></span></div><div style="font-size:11px;">โ๏ธ <span id="outEmail"></span></div></div>
                    <div><div id="pdf-label-lang" class="pdf-badge">ุงููุบุงุช</div><div id="outLang" style="font-size:14px; text-align:center; font-weight:bold; color:var(--primary);"></div></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentLang = 'ar';
        const fields = ['inName', 'inJob', 'inBirth', 'inAddress', 'inPhone', 'inEmail', 'inAbout', 'inExp', 'inEdu', 'inSkills', 'inLang'];

        async function handleTranslate(lang) {
            if(lang === currentLang) return;
            const over = document.getElementById('status-overlay');
            over.style.display = 'flex';
            
            for(let id of fields) {
                if(['inPhone', 'inEmail', 'inBirth'].includes(id)) continue;
                let val = document.getElementById(id).value;
                if(!val) continue;
                try {
                    const res = await fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${lang}&dt=t&q=${encodeURI(val)}`);
                    const data = await res.json();
                    document.getElementById(id).value = data[0][0][0];
                } catch(e) {}
            }

            currentLang = lang;
            document.getElementById('btn-ar').classList.toggle('active');
            document.getElementById('btn-en').classList.toggle('active');
            document.getElementById('pdf-template').classList.toggle('ltr', lang === 'en');
            
            const labels = {
                en: { title: "Welcome to CV FORGE โจ", desc: "Create your professional CV in one minute, completely free.", exp:"Professional Experience", edu:"Education", skills:"Skills", about:"Profile", contact:"Contact", lang:"Languages" },
                ar: { title: "ุฃููุงู ุจู ูู CV FORGE โจ", desc: "ุงุตูุน ุณูุฑุชู ุงูุฐุงุชูุฉ ุงูุงุญุชุฑุงููุฉ ูู ุฏูููุฉ ูุงุญุฏุฉ ูุจุดูู ูุฌุงูู ุชูุงูุงู.", exp:"ุงูุฎุจุฑุงุช ุงูููููุฉ", edu:"ุงูุชุนููู", skills:"ุงูููุงุฑุงุช ูุงููุฏุฑุงุช", about:"ุงูููู ุงูุดุฎุตู", contact:"ุจูุงูุงุช ุงูุชูุงุตู", lang:"ุงููุบุงุช" }
            };
            document.getElementById('welcome-title').innerText = labels[lang].title;
            document.getElementById('welcome-desc').innerText = labels[lang].desc;
            document.getElementById('pdf-label-exp').innerText = labels[lang].exp;
            document.getElementById('pdf-label-edu').innerText = labels[lang].edu;
            document.getElementById('pdf-label-skills').innerText = labels[lang].skills;
            document.getElementById('pdf-label-about').innerText = labels[lang].about;
            document.getElementById('pdf-label-contact').innerText = labels[lang].contact;
            document.getElementById('pdf-label-lang').innerText = labels[lang].lang;

            over.style.display = 'none';
            save();
        }

        function generatePalette() {
            const p = [{p:'#0f172a', a:'#38bdf8'}, {p:'#1e3a8a', a:'#fbbf24'}, {p:'#064e3b', a:'#34d399'}][Math.floor(Math.random()*3)];
            document.documentElement.style.setProperty('--primary', p.p);
            document.documentElement.style.setProperty('--accent', p.a);
            document.getElementById('pdf-header').style.backgroundColor = p.p;
        }

        async function exportCV() {
            fields.forEach(f => {
                const outId = f.replace('in', 'out');
                if(document.getElementById(outId)) document.getElementById(outId).innerText = document.getElementById(f).value;
            });
            const expLen = document.getElementById('inExp').value.length;
            document.querySelectorAll('.content-text').forEach(d => d.style.fontSize = expLen < 150 ? "17px" : "14px");
            
            document.getElementById('status-overlay').style.display = 'flex';
            setTimeout(async () => {
                const canvas = await html2canvas(document.getElementById('pdf-template'), { scale: 2 });
                const pdf = new jspdf.jsPDF('p', 'mm', 'a4');
                pdf.addImage(canvas.toDataURL('image/png'), 'PNG', 0, 0, 210, 297);
                pdf.save(`CV_Professional.pdf`);
                document.getElementById('status-overlay').style.display = 'none';
            }, 1000);
        }

        function save() { fields.forEach(f => localStorage.setItem(f, document.getElementById(f).value)); }
        function load() { fields.forEach(f => { if(localStorage.getItem(f)) document.getElementById(f).value = localStorage.getItem(f); }); }
        function toggleTheme() { document.getElementById('body-tag').classList.toggle('dark-mode'); }
        document.getElementById('inPhoto').onchange = e => {
            const r = new FileReader(); r.onload = () => document.getElementById('outPhoto').src = r.result; r.readAsDataURL(e.target.files[0]);
        };
        window.onload = load;
    </script>
</body>
</html>
